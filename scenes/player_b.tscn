[gd_scene load_steps=50 format=3 uid="uid://dio5jigt43634"]

[ext_resource type="Script" uid="uid://dcno4y1yorj0t" path="res://scripts/player_b.gd" id="1_dqkch"]
[ext_resource type="Script" uid="uid://b52xysvcbulq2" path="res://scripts/raycasts.gd" id="3_tuyoq"]
[ext_resource type="Script" uid="uid://488mje04aavy" path="res://scripts/bomb_placement_system.gd" id="4_fjrip"]
[ext_resource type="PackedScene" uid="uid://dl80vy8siey7k" path="res://scenes/input_synchronizer.tscn" id="5_augp2"]
[ext_resource type="Texture2D" uid="uid://cq8o72i7lk181" path="res://resources/sprites/painters/Azul.png" id="5_k178q"]
[ext_resource type="Script" uid="uid://6vol5frvnoap" path="res://scripts/power_up_system.gd" id="9_52330"]
[ext_resource type="AudioStream" uid="uid://crxw6mpsigsew" path="res://resources/songs/Retro Blop StereoUP 09.wav" id="10_j1cfb"]
[ext_resource type="AudioStream" uid="uid://drvxgn56mv4ly" path="res://resources/songs/Retro Charge Magic 11.wav" id="11_sr4pk"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_i3itl"]
radius = 6.0
height = 16.0

[sub_resource type="Animation" id="Animation_52330"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(1, 0)]
}

[sub_resource type="Animation" id="Animation_d1uid"]
resource_name = "idle"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.0333333),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(4, 0)]
}

[sub_resource type="Animation" id="Animation_2700y"]
resource_name = "idleLeft"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(1, 0)]
}

[sub_resource type="Animation" id="Animation_p1apc"]
resource_name = "idleRight"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.1),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(1, 1)]
}

[sub_resource type="Animation" id="Animation_mrxoe"]
resource_name = "idleback"
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(4, 1)]
}

[sub_resource type="Animation" id="Animation_sr4pk"]
resource_name = "walksBack"
length = 0.4
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(4, 1), Vector2i(5, 1), Vector2i(4, 1), Vector2i(3, 1)]
}

[sub_resource type="Animation" id="Animation_j1cfb"]
resource_name = "walksFront"
length = 0.4
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(4, 0), Vector2i(5, 0), Vector2i(4, 0), Vector2i(3, 0)]
}

[sub_resource type="Animation" id="Animation_lweon"]
resource_name = "walksLeft"
length = 0.4
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 0), Vector2i(1, 0), Vector2i(2, 0), Vector2i(1, 0)]
}

[sub_resource type="Animation" id="Animation_2dktj"]
resource_name = "walksRight"
length = 0.4
loop_mode = 1
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:hframes")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [14]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite:vframes")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [15]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite:frame_coords")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 1), Vector2i(1, 1), Vector2i(2, 1), Vector2i(1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_sr4pk"]
_data = {
&"RESET": SubResource("Animation_52330"),
&"idle": SubResource("Animation_d1uid"),
&"idleLeft": SubResource("Animation_2700y"),
&"idleRight": SubResource("Animation_p1apc"),
&"idleback": SubResource("Animation_mrxoe"),
&"walksBack": SubResource("Animation_sr4pk"),
&"walksFront": SubResource("Animation_j1cfb"),
&"walksLeft": SubResource("Animation_lweon"),
&"walksRight": SubResource("Animation_2dktj")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_d1uid"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_52330"]
animation = &"idleLeft"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_j1cfb"]
animation = &"idleRight"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sr4pk"]
animation = &"idleback"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tqq2l"]
animation = &"walksBack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_r8v6t"]
animation = &"walksFront"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8ne4s"]
animation = &"walksLeft"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kmucg"]
animation = &"walksRight"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_d7uau"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lweon"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2dktj"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_p1apc"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2700y"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_mrxoe"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i3itl"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_d3mnt"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_66mew"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_leiro"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nvn0k"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_q8mwi"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1i170"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tn8lr"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i3f8n"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xxlhr"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g5iot"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hke5q"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_cerr8"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ri24h"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tuf4u"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_o81wf"]
states/idle/node = SubResource("AnimationNodeAnimation_d1uid")
states/idle/position = Vector2(302, 77)
states/idleLeft/node = SubResource("AnimationNodeAnimation_52330")
states/idleLeft/position = Vector2(312, 133)
states/idleRight/node = SubResource("AnimationNodeAnimation_j1cfb")
states/idleRight/position = Vector2(302, 182)
states/idleback/node = SubResource("AnimationNodeAnimation_sr4pk")
states/idleback/position = Vector2(312, 235)
states/walksBack/node = SubResource("AnimationNodeAnimation_tqq2l")
states/walksBack/position = Vector2(464, 230)
states/walksFront/node = SubResource("AnimationNodeAnimation_r8v6t")
states/walksFront/position = Vector2(464, 43)
states/walksLeft/node = SubResource("AnimationNodeAnimation_8ne4s")
states/walksLeft/position = Vector2(471, 110)
states/walksRight/node = SubResource("AnimationNodeAnimation_kmucg")
states/walksRight/position = Vector2(471, 170)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_d7uau"), "idle", "walksFront", SubResource("AnimationNodeStateMachineTransition_lweon"), "walksFront", "idle", SubResource("AnimationNodeStateMachineTransition_2dktj"), "idleLeft", "walksLeft", SubResource("AnimationNodeStateMachineTransition_p1apc"), "walksLeft", "idleLeft", SubResource("AnimationNodeStateMachineTransition_2700y"), "idleRight", "walksRight", SubResource("AnimationNodeStateMachineTransition_mrxoe"), "walksRight", "idleRight", SubResource("AnimationNodeStateMachineTransition_i3itl"), "idleback", "walksBack", SubResource("AnimationNodeStateMachineTransition_d3mnt"), "walksBack", "idleback", SubResource("AnimationNodeStateMachineTransition_66mew"), "idle", "walksLeft", SubResource("AnimationNodeStateMachineTransition_leiro"), "idle", "walksRight", SubResource("AnimationNodeStateMachineTransition_nvn0k"), "idle", "walksBack", SubResource("AnimationNodeStateMachineTransition_q8mwi"), "idleLeft", "walksFront", SubResource("AnimationNodeStateMachineTransition_1i170"), "idleLeft", "walksRight", SubResource("AnimationNodeStateMachineTransition_tn8lr"), "idleLeft", "walksBack", SubResource("AnimationNodeStateMachineTransition_i3f8n"), "idleRight", "walksFront", SubResource("AnimationNodeStateMachineTransition_xxlhr"), "idleRight", "walksLeft", SubResource("AnimationNodeStateMachineTransition_g5iot"), "idleRight", "walksBack", SubResource("AnimationNodeStateMachineTransition_hke5q"), "idleback", "walksFront", SubResource("AnimationNodeStateMachineTransition_cerr8"), "idleback", "walksLeft", SubResource("AnimationNodeStateMachineTransition_ri24h"), "idleback", "walksRight", SubResource("AnimationNodeStateMachineTransition_tuf4u")]

[node name="Player_b" type="CharacterBody2D"]
z_index = 1
collision_mask = 64
script = ExtResource("1_dqkch")

[node name="Area2D" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
shape = SubResource("CapsuleShape2D_i3itl")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
scale = Vector2(0.75, 0.75)
shape = SubResource("CapsuleShape2D_i3itl")

[node name="Raycasts" type="Node2D" parent="."]
script = ExtResource("3_tuyoq")

[node name="Horizontal" type="Node2D" parent="Raycasts"]

[node name="Left" type="Node2D" parent="Raycasts/Horizontal"]

[node name="LeftHorizontalBottom" type="RayCast2D" parent="Raycasts/Horizontal/Left" groups=["raycasts"]]
position = Vector2(-2, 6)
target_position = Vector2(-4, 0)
collision_mask = 14
collide_with_areas = true

[node name="LeftHorizontalTop" type="RayCast2D" parent="Raycasts/Horizontal/Left" groups=["raycasts"]]
position = Vector2(-2, -6)
target_position = Vector2(-4, 0)
collision_mask = 14
collide_with_areas = true

[node name="Right" type="Node2D" parent="Raycasts/Horizontal"]

[node name="RightHorizontalBottom" type="RayCast2D" parent="Raycasts/Horizontal/Right" groups=["raycasts"]]
position = Vector2(2, 6)
target_position = Vector2(4, 0)
collision_mask = 14
collide_with_areas = true

[node name="RightHorizontalTop" type="RayCast2D" parent="Raycasts/Horizontal/Right" groups=["raycasts"]]
position = Vector2(2, -6)
target_position = Vector2(4, 0)
collision_mask = 14
collide_with_areas = true

[node name="Vertical" type="Node2D" parent="Raycasts"]

[node name="Top" type="Node2D" parent="Raycasts/Vertical"]

[node name="TopVerticalRight" type="RayCast2D" parent="Raycasts/Vertical/Top" groups=["raycasts"]]
position = Vector2(3, -6)
target_position = Vector2(0, -2)
collision_mask = 14
collide_with_areas = true

[node name="TopVerticalLeft" type="RayCast2D" parent="Raycasts/Vertical/Top" groups=["raycasts"]]
position = Vector2(-3, -6)
target_position = Vector2(0, -2)
collision_mask = 14
collide_with_areas = true

[node name="Bottom" type="Node2D" parent="Raycasts/Vertical"]

[node name="BottomVerticalRight" type="RayCast2D" parent="Raycasts/Vertical/Bottom" groups=["raycasts"]]
position = Vector2(2, 6)
target_position = Vector2(0, 2)
collision_mask = 14
collide_with_areas = true

[node name="BottomVerticalLeft" type="RayCast2D" parent="Raycasts/Vertical/Bottom" groups=["raycasts"]]
position = Vector2(-2, 6)
target_position = Vector2(0, 2)
collision_mask = 14
collide_with_areas = true

[node name="BombPlacementSystem" type="Node" parent="."]
script = ExtResource("4_fjrip")

[node name="InputSynchronizer" parent="." instance=ExtResource("5_augp2")]

[node name="SyncTimer" type="Timer" parent="."]
process_callback = 0
wait_time = 0.1

[node name="Sprite" type="Sprite2D" parent="."]
scale = Vector2(0.5, 0.5)
texture = ExtResource("5_k178q")
hframes = 14
vframes = 15
frame = 1

[node name="Node2D" type="Node2D" parent="."]

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_sr4pk")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_o81wf")
anim_player = NodePath("../AnimationPlayer")

[node name="PowerUpSystem" type="Node" parent="."]
script = ExtResource("9_52330")

[node name="PutSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("10_j1cfb")
volume_db = -10.0

[node name="PowerUpSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("11_sr4pk")
volume_db = -17.0
pitch_scale = 0.61

[connection signal="area_entered" from="Area2D" to="." method="_on_area_2d_area_entered"]
